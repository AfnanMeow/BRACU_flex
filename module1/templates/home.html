
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Netflix - Watch TV Shows Online, Watch Movies Online</title>
    <link rel="stylesheet" href="{% static 'netflix_clone/css/reset.css' %}">
    <link rel="stylesheet" href="{% static 'netflix_clone/css/styles.css' %}">
    <link rel="icon" href="{% static 'netflix_clone/images/favicon.ico' %}" type="image/x-icon">
</head>
<body class="browse-page">
    

    <header class="header header-browse">
        <div class="header-container">
            <div class="primary-navigation">
                <div class="logo">
                    <a href="browse.html">
                        <img src="{% static 'netflix_clone/images/netflix-logo.svg' %}" alt="Netflix" style="height: 80px;">
                    </a>
                </div>
                <nav class="main-nav">
                    {% if user.is_superuser %}
                    <!-- Navigation Buttons -->
    <h2>Navigate to:</h2>
    <div>
        <a href="{% url 'movie_home' %}" style="padding: 10px; background-color: #007bff; color: white; text-decoration: none; border-radius: 5px;">Movies</a>
        <a href="{% url 'review_home' %}" style="padding: 10px; background-color: #28a745; color: white; text-decoration: none; border-radius: 5px;">Reviews</a>
        <a href="/admin/" style="padding: 10px; background-color: #dc3545; color: white; text-decoration: none; border-radius: 5px;">Admin Panel</a>
        <a href="{% url 'show_added_friends' %}" style="padding: 10px; background-color: #17a2b8; color: white; text-decoration: none; border-radius: 5px;">Friends List</a>
        <a href="{% url 'add_movie' %}" style="padding: 10px; background-color: #ffc107; color: white; text-decoration: none; border-radius: 5px;">Add Movie</a>
        <a href="{% url 'edit_movie' movie_id=1 %}" style="padding: 10px; background-color: #6c757d; color: white; text-decoration: none; border-radius: 5px;">Edit Movie</a>
    </div> {% else %}
                    <ul>
                        <li class="active"><a href="{% url 'home' %}">Home</a></li>
                        <li><a href="#">TV Shows</a></li>
                        <li><a href="#">Movies</a></li>
                        <li><a href="#">New & Popular</a></li>
                        <li><a href="#">My List</a></li>
                        <li><a href="{% url 'my_uploads' %}">My Uploads</a></li>
                        <li><a href="#">Browse by Languages</a></li>
                        <li><a href="{% url 'watchlist' %}" class="btn btn-primary">üì∫ Watchlist</a></li>

                    </ul>
                </nav>{% endif %}
            </div>

                <div class="secondary-navigation">
                    {% if messages %}
  <div class="messages">
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }}">
        {{ message }}
      </div>
    {% endfor %}
    </div>
    {% endif %}
                    <div class="subscription-link">
                        <a href="{% url 'subscription' %}" class="btn btn-subscribe">üì¶ Subscription</a>
                    </div>
                    
                    
                    
                    <div class="search">
                      <span class="search-icon"><a href="{% url 'browse_database' %}">üîç</a></span>
                    </div>
                    <div class="notifications">
                      <span class="notifications-icon">üîî</span>
                    </div>
                    <button class="theme-toggler" id="themeToggler" title="Toggle Theme">Toggle to light</button>
                    <div class="profile-menu">
                      <div class="profile-trigger">
                        {% if active_profile.avatar %}
      <img src="{{ active_profile.avatar.url }}" alt="Profile" class="profile-avatar">
    {% else %}
      <img src="{% static 'netflix_clone/images/profile-avatar.png' %}" alt="Profile" class="profile-avatar">
    {% endif %}
                        <span class="dropdown-arrow">‚ñº</span>
                        <span class="profile-menu">Hi, {{active_profile.name}} !</span>
                      </div>
                      
                      <div class="dropdown-content">
                        <p><a href="{% url 'profile_select' %}">Profiles</a></p>
                        <a href="{% url 'profile' %}">Edit Profile</a>
                        <a href="#">Settings</a>
                        <a href="{% url 'upload_video' %}">Upload Movie</a>
                        <a href="{% url 'logout' %}">Logout</a>
                      </div>
                    </div>
                  </div>
            </div>
        </div>
    </header>

    <main>
        <!-- Hero Banner with Featured Content -->
        <section class="featured-hero">
            <div class="featured-content">
                <div class="featured-meta">
                    <img src="https://ext.same-assets.com/855227852/2563901416.svg" alt="Netflix" class="netflix-n-logo">
                    <span class="content-type">SERIES</span>
                </div>
                <div class="featured-title">
                    <h1>STRANGER THINGS</h1>
                    

                </div>
                <div class="featured-ranking">
                    <span class="top-badge">#1 in TV Shows Today</span>
                </div>
                <div class="featured-description">
                    <p>When a young boy vanishes, a small town uncovers a mystery involving secret experiments, terrifying supernatural forces and one strange little girl.</p>
                </div>
                <div class="featured-actions">
                    <button class="btn btn-play"><span>‚ñ∂</span> Play</button>
                    <button class="btn btn-more-info"><span>‚Ñπ</span> More Info</button>
                </div>
                <div class="maturity-rating">
                    <span>TV-14</span>
                </div>
                

            </div>
        </section>

        <!-- Content Rows -->
        <section class="content-rows">
            <!-- Trending Now Row -->
            <div class="content-row">
                <h2 class="row-title">Trending Now</h2>
                <div class="title-cards">
                    <div class="title-card">
                        <img src="https://ext.same-assets.com/855227852/138160168.webp" alt="Movie Title" class="title-card-image">
                        <div class="title-card-play">‚ñ∂</div>
                    </div>
                    <div class="title-card">
                        <img src="https://ext.same-assets.com/855227852/1911221998.webp" alt="Movie Title" class="title-card-image">
                        <div class="title-card-play">‚ñ∂</div>
                    </div>
                    <div class="title-card">
                        <img src="https://ext.same-assets.com/855227852/983517501.webp" alt="Movie Title" class="title-card-image">
                        <div class="title-card-play">‚ñ∂</div>
                    </div>
                    <div class="title-card">
                        <img src="https://ext.same-assets.com/855227852/2445665303.webp" alt="Movie Title" class="title-card-image">
                        <div class="title-card-play">‚ñ∂</div>
                    </div>
                    <div class="title-card">
                        <img src="https://ext.same-assets.com/855227852/3011282509.webp" alt="Movie Title" class="title-card-image">
                        <div class="title-card-play">‚ñ∂</div>
                    </div>
                    <div class="title-card">
                        <img src="https://ext.same-assets.com/855227852/1154196078.webp" alt="Movie Title" class="title-card-image">
                        <div class="title-card-play">‚ñ∂</div>
                    </div>
                </div>
            </div>

            <!-- Continue Watching Row -->
<!-- Continue Watching Row -->
<div class="content-row">
    <h2 class="row-title">Continue Watching for User</h2>
    <div class="title-cards continue-watching">
        <div class="title-card">
            <img src="https://ext.same-assets.com/855227852/1950992896.webp" alt="Movie Title" class="title-card-image">
            <div class="title-card-play">‚ñ∂</div>
            <div class="progress-bar">
                <div class="progress" style="width: 65%;"></div>  <!-- Example for progress -->
            </div>
        </div>
        {% for video in videos %}
        <div class="title-card">
            <video id="videoPlayer" width="800" controls data-id="{{ video.id }}">    
                <source src="{{ video.file.url }}" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <h3>{{ video.title }}</h3>
            <div class="progress-bar">
                <div class="progress" style="width: {{ video.progress|floatformat:0 }}%;"></div> <!-- Using video.progress as a percentage -->
            </div>
            <a href="{% url 'add_to_watchlist' video.id %}">‚ûï Add to Watchlist</a>
        </div>
        {% empty %}
        <p>No videos found.</p>
        {% endfor %}
    </div>
</div>

    {% for video in videos %}
                    <!-- 3333333333333333333333 HUGE problem <p><h3><span>{{ video.progress}}</span></h3></p> ----------->                
    <div class="title-card">
        <source src="{{ video.file.url }}" alt="Movie Title" class="title-card-image" type="video/mp4"> 
        <div class="title-card-play"><a href="{% url 'show_details' serial_no=video.id  %}">‚ñ∂</a></div> 
        <div class="progress-bar">
            <div class="progress" style="width: {{ video.progress }}/120 %;"></div>
        </div>
        <!--<video id="videoPlayer" width="800" controls> -->
        <video id="videoPlayer" width="800" controls data-id="{{ video.id }}">    
            <source src="{{ video.file.url }}" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <p><h3><span>{{ video.title }}</span></h3></p>
        <a href="{% url 'add_to_watchlist' video.id %}">‚ûï Add to Watchlist</a>

        
    </div>
    

    <!-- Video Controls -->
    <!--<div class="controls">
        <button onclick="playPause()">Play/Pause</button>
        <button onclick="skip(-10)">‚è™ Back 10s</button>
        <button onclick="skip(10)">‚è© Forward 10s</button>
        <button onclick="nextVideo()">Next Video</button>
    </div>-->
    {% empty %}
    <p>No videos found.</p>
    {% endfor %}

    <!-- Uploaded by users videos that is public-->
    <!-- Uploaded by users videos that are public-->
{% for video2 in videos2 %}
<div class="video-container">
    <video id="videoPlayer" width="800" controls data-id="{{ video2.id }}">    
        <source src="{{ video2.video_file.url }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    <h3>{{ video2.title }}</h3>
    <a href="{{ video2.video_file.url }}" download="{{ video2.title }}.mp4" class="btn btn-download" style="display: inline-block; margin-top: 10px; padding: 10px 20px; background-color: #e50914; color: #fff; text-decoration: none; border-radius: 5px; font-size: 16px; text-align: center;">
        Download
    </a>
</div>
 <!-- Video Controls -->
    <div class="controls">
        <button onclick="playPause()">Play/Pause</button>
        <button onclick="skip(-10)">‚è™ Back 10s</button>
        <button onclick="skip(10)">‚è© Forward 10s</button>
        <button onclick="nextVideo()">Next Video</button>
        <a href="{% url 'shared_video' video2.share_token %}" target="_blank">
            <button>Share</button>
        </a>
    </div>
    {% empty %}
    <p>No videos found.</p>
    {% endfor %}
                    <!--<div class="title-card">
                        <img src="https://ext.same-assets.com/855227852/2383234051.webp" alt="Movie Title" class="title-card-image">
                        <div class="title-card-play">‚ñ∂</div>
                        <div class="progress-bar">
                            <div class="progress" style="width: 23%;"></div>
                        </div>
                    </div>
                    <div class="title-card">
                        <img src="https://ext.same-assets.com/855227852/1272619231.webp" alt="Movie Title" class="title-card-image">
                        <div class="title-card-play">‚ñ∂</div>
                        <div class="progress-bar">
                            <div class="progress" style="width: 45%;"></div>
                        </div>
                    </div>-->
                    <!--<div class="title-card">
                        <img src="https://ext.same-assets.com/855227852/3644830612.webp" alt="Movie Title" class="title-card-image">
                        <div class="title-card-play">‚ñ∂</div>
                        <div class="progress-bar">
                            <div class="progress" style="width: 12%;"></div>
                        </div>
                    </div>-->
                </div>
            </div>

            <!-- Popular on Netflix Row -->
            <div class="content-row">
                <h2 class="row-title">Popular on Netflix</h2>
                <div class="title-cards">
                    <div class="title-card">
                        <img src="https://ext.same-assets.com/855227852/138160168.webp" alt="Movie Title" class="title-card-image">
                        <div class="title-card-play">‚ñ∂</div>
                    </div>
                    <div class="title-card">
                        <img src="https://ext.same-assets.com/855227852/1911221998.webp" alt="Movie Title" class="title-card-image">
                        <div class="title-card-play">‚ñ∂</div>
                    </div>
                    <div class="title-card">
                        <img src="https://ext.same-assets.com/855227852/983517501.webp" alt="Movie Title" class="title-card-image">
                        <div class="title-card-play">‚ñ∂</div>
                    </div>
                    <div class="title-card">
                        <img src="https://ext.same-assets.com/855227852/2445665303.webp" alt="Movie Title" class="title-card-image">
                        <div class="title-card-play">‚ñ∂</div>
                    </div>
                    <div class="title-card">
                        <img src="https://ext.same-assets.com/855227852/1950992896.webp" alt="Movie Title" class="title-card-image">
                        <div class="title-card-play">‚ñ∂</div>
                    </div>
                    <div class="title-card">
                        <img src="https://ext.same-assets.com/855227852/1154196078.webp" alt="Movie Title" class="title-card-image">
                        <div class="title-card-play">‚ñ∂</div>
                    </div>
                </div>
            </div>

            <!-- Netflix Originals Row -->
     <!-- Netflix Originals Row -->
<div class="content-row originals-row">
    <h2 class="row-title">Netflix Originals</h2>
    <div class="title-cards">
        <div class="title-card">
            <img src="https://ext.same-assets.com/855227852/1272619231.webp" alt="Movie Title" class="title-card-image">
            <div class="title-card-play">‚ñ∂</div>
        </div>
        <div class="title-card">
            <img src="https://ext.same-assets.com/855227852/3644830612.webp" alt="Movie Title" class="title-card-image">
            <div class="title-card-play">‚ñ∂</div>
        </div>
        <div class="title-card">
            <img src="https://ext.same-assets.com/855227852/3011282509.webp" alt="Movie Title" class="title-card-image">
            <div class="title-card-play">‚ñ∂</div>
        </div>
        <div class="title-card">
            <img src="https://ext.same-assets.com/855227852/1154196078.webp" alt="Movie Title" class="title-card-image">
            <div class="title-card-play">‚ñ∂</div>
        </div>
    </div>
</div>

<!-- My Watchlist Row -->
<div class="content-row watchlist-row">
    <h2 class="row-title">My Watchlist</h2>
    <div class="title-cards">
        <div class="title-card">
            <img src="https://ext.same-assets.com/855227852/2455472101.webp" alt="Watchlist Movie" class="title-card-image">
            <div class="title-card-play">‚ñ∂</div>
        </div>
        <div class="title-card">
            <img src="https://ext.same-assets.com/855227852/1515179018.webp" alt="Watchlist Movie" class="title-card-image">
            <div class="title-card-play">‚ñ∂</div>
        </div>
        <div class="title-card">
            <img src="https://ext.same-assets.com/855227852/3691934012.webp" alt="Watchlist Movie" class="title-card-image">
            <div class="title-card-play">‚ñ∂</div>
        </div>
        <div class="title-card">
            <img src="https://ext.same-assets.com/855227852/1123490847.webp" alt="Watchlist Movie" class="title-card-image">
            <div class="title-card-play">‚ñ∂</div>
        </div>
    </div>
</div>

        </section>
    </main>

    <footer class="footer footer-browse">
        <div class="footer-content">
            <div class="social-links">
                <a href="#" class="social-icon">Facebook</a>
                <a href="#" class="social-icon">Instagram</a>
                <a href="#" class="social-icon">Twitter</a>
                <a href="#" class="social-icon">YouTube</a>
            </div>

            <div class="footer-links">
                <div class="footer-column">
                    <a href="#">Audio Description</a>
                    <a href="#">Investor Relations</a>
                    <a href="#">Legal Notices</a>
                </div>
                <div class="footer-column">
                    <a href="#">Help Center</a>
                    <a href="#">Jobs</a>
                    <a href="#">Cookie Preferences</a>
                </div>
                <div class="footer-column">
                    <a href="#">Gift Cards</a>
                    <a href="#">Terms of Use</a>
                    <a href="#">Corporate Information</a>
                </div>
                <div class="footer-column">
                    <a href="#">Media Center</a>
                    <a href="#">Privacy</a>
                    <a href="#">Contact Us</a>
                </div>
            </div>

            <button class="btn btn-service-code">Service Code</button>

            <p class="copyright">¬© 1997-2025 Netflix, Inc.</p>
        </div>
    </footer>

    <script src="{% static 'netflix_clone/js/main.js' %}"></script>
    <script>
    document.addEventListener("DOMContentLoaded", () => {
        const themeToggler = document.getElementById("themeToggler");
        if (!themeToggler) {
            console.error("Theme toggler button not found in the DOM.");
            return;
        }

        const body = document.body;

        // Check local storage for saved theme
        const savedTheme = localStorage.getItem("theme");
        if (savedTheme) {
            body.classList.add(savedTheme);
            themeToggler.textContent =
                savedTheme === "light-mode" ? "Toggle to dark" : "Toggle to light";
            console.log(`Loaded theme: ${savedTheme}`);
        }

        // Toggle theme on button click
        themeToggler.addEventListener("click", () => {
            if (body.classList.contains("light-mode")) {
                body.classList.remove("light-mode");
                body.style.backgroundColor = "#141414"; // Dark mode background
                body.style.color = "#ffffff"; // Dark mode text
                localStorage.setItem("theme", "");
                themeToggler.textContent = "Toggle to light";
                console.log("Switched to dark mode");
            } else {
                body.classList.add("light-mode");
                body.style.backgroundColor = "#f9f9f9"; // Light mode background
                body.style.color = "#333333"; // Light mode text
                localStorage.setItem("theme", "light-mode");
                themeToggler.textContent = "Toggle to dark";
                console.log("Switched to light mode");
            }
        });
    });
</script><script>
        setTimeout(function () {
          const alerts = document.querySelectorAll('.alert');
          alerts.forEach(alert => alert.style.display = 'none');
        }, 3000); // hides after 3 seconds
      </script>
</body>
</html>










<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Player</title>
    <link rel="stylesheet" href="{% static 'home/css/style.css' %}">
</head>
<body>
    

    <!-- Search Bar -->
    <div class="search-bar">
        <form action="{% url 'search_videos' %}" method="get">
            <input type="text" name="q" placeholder="Search videos..." value="{{ query|default:'' }}">
            <button type="submit">Search</button>
        </form>
    </div>

    {% if query %}
    <h2>Search Results for "{{ query }}"</h2>
    {% if videos %}
        {% for video in videos %}
        <div class="video-container">
            <div class="video-wrapper">
                <video id="videoPlayer{{ forloop.counter }}" controls data-id="{{ video.id }}">
                    <source src="{{ video.file.url }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
            <h3>{{ video.title }}</h3>
            <a href="{{ video.file.url }}" download="{{ video.title }}.mp4" class="btn btn-download">Download</a>
        </div>
        {% endfor %}
    {% else %}
        <p>No videos found for your search.</p>
    {% endif %}
    {% endif %}

    <!-- Navigation Buttons -->
    <!--<h2>Navigate to:</h2>
    <div>
        <a href="{% url 'movie_home' %}" style="padding: 10px; background-color: #007bff; color: white; text-decoration: none; border-radius: 5px;">Movies</a>
        <a href="{% url 'review_home' %}" style="padding: 10px; background-color: #28a745; color: white; text-decoration: none; border-radius: 5px;">Reviews</a>
        <a href="/admin/" style="padding: 10px; background-color: #dc3545; color: white; text-decoration: none; border-radius: 5px;">Admin Panel</a>
        <a href="{% url 'show_added_friends' %}" style="padding: 10px; background-color: #17a2b8; color: white; text-decoration: none; border-radius: 5px;">Friends List</a>
        <a href="{% url 'add_movie' %}" style="padding: 10px; background-color: #ffc107; color: white; text-decoration: none; border-radius: 5px;">Add Movie</a>
        <a href="{% url 'edit_movie' movie_id=1 %}" style="padding: 10px; background-color: #6c757d; color: white; text-decoration: none; border-radius: 5px;">Edit Movie</a>
    </div>-->

    <!-- Video Player -->
    <h2>Video Gallery</h2>
    {% for video in videos %}
    <div class="video-container">
        <div class="video-wrapper">
            <video id="videoPlayer" width="800" controls data-id="{{ video.id }}">    
                <source src="{{ video.file.url }}" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
        <h3>{{ video.title }}</h3>
        <a href="{{ video.file.url }}" download="{{ video.title }}.mp4" class="btn btn-download" style="display: inline-block; margin-top: 10px; padding: 10px 20px; background-color: #e50914; color: #fff; text-decoration: none; border-radius: 5px; font-size: 16px; text-align: center;">
    Download
</a>
        <!--<video id="videoPlayer" width="800" controls>
            <source src="{{ video.file.url }}" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <h3>{{ video.title }}</h3> afaf-only-->
    </div>

    <!-- Video Controls -->
    <div class="controls">
        <button onclick="playPause()">Play/Pause</button>
        <button onclick="skip(-10)">‚è™ Back 10s</button>
        <button onclick="skip(10)">‚è© Forward 10s</button>
        <button onclick="nextVideo()">Next Video</button>
        <a href="{% url 'shared_video' video.share_token %}" target="_blank">
            <button>Share</button>
        </a>
    </div>
    {% empty %}
    <p>No videos found.</p>
    {% endfor %}

    <!-- Uploaded by users videos that is public-->
    {% for video2 in videos2 %}
    <div class="video-container" style="max-width: 10%; margin: 10px auto; padding: 10px; box-sizing: border-box;">
        <div class="video-wrapper" style="position: relative; width: 100%; padding-top: 56.25%; overflow: hidden;">
            <video id="videoPlayer" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" controls data-id="{{ video2.id }}">    
                <source src="{{ video2.video_file.url }}" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
        <h3 style="font-size: 16px; text-align: center; margin-top: 10px;">{{ video2.title }}</h3>
    </div>
    

    <!-- Video Controls -->
    <div class="controls">
        <button onclick="playPause()">Play/Pause</button>
        <button onclick="skip(-10)">‚è™ Back 10s</button>
        <button onclick="skip(10)">‚è© Forward 10s</button>
        <button onclick="nextVideo()">Next Video</button>
        <a href="{% url 'shared_video' video2.share_token %}" target="_blank">
            <button>Share</button>
        </a>
    </div>
    {% empty %}
    <p>No videos found.</p>
    {% endfor %}

    <!-- Hidden Input to Track Watch Time -->
    <input type="hidden" id="userWatchTime" value="{{ user.watching_hour }}">
    
    <script src="{% static 'home/js/player.js' %}"></script>
    <script>
        const videoProgress = {{ video_progress|safe }};
        window.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll("video").forEach(video => {
                const id = video.getAttribute("data-id");
                const progress = videoProgress[id];
                if (progress) {
                    video.currentTime = progress;
                    console.log(`‚è© Resuming video ${id} at ${progress} seconds`);
                }
            });
        });
    </script>
</body>
</html>
<script src="{% static 'home/js/player.js' %}"></script>
<script>
    console.log("JavaScript is loaded correctly!");
</script>